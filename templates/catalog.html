<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LegoBricks - –ö–∞—Ç–∞–ª–æ–≥</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
</head>
<body>
    <header>
        <nav>
            <div class="logo">
                <a href="{{ url_for('index') }}">
                    <img src="{{ url_for('static', filename='images/logo.png') }}" alt="LegoBricks" style="height: 50px;">
                </a>
            </div>
            <ul>
                <li><a href="{{ url_for('index') }}">–ì–ª–∞–≤–Ω–∞—è</a></li>
                <li><a href="{{ url_for('catalog') }}">–ö–∞—Ç–∞–ª–æ–≥</a></li>
                <li><a href="{{ url_for('about') }}">–û –Ω–∞—Å</a></li>
                <li><a href="{{ url_for('cart') }}" class="cart-icon">üõí <span id="cart-count">0</span></a></li>
            </ul>
        </nav>
    </header>

    <main>
        <h1>–ö–∞—Ç–∞–ª–æ–≥ LEGO-–∫–∏—Ä–ø–∏—á–µ–π</h1>

        <div class="filters">
            <button class="filter-btn active" data-filter="all">–í—Å–µ</button>
            <button class="filter-btn" data-filter="beige">–ë–µ–∂–µ–≤—ã–µ</button>
            <button class="filter-btn" data-filter="brown">–ö–æ—Ä–∏—á–Ω–µ–≤—ã–µ</button>
            <button class="filter-btn" data-filter="black">–ß—ë—Ä–Ω—ã–µ</button>
            <button class="filter-btn" data-filter="red">–ö—Ä–∞—Å–Ω—ã–µ</button>
            <button class="filter-btn" data-filter="gray">–°–µ—Ä—ã–µ</button>
            <button class="filter-btn" data-filter="yellow">–ñ—ë–ª—Ç—ã–µ</button>
        </div>

        <div class="catalog-grid">
            {% for brick in bricks %}
            <div class="brick-card" data-color="{{ brick.color.split('_')[0] }}">
                <img src="{{ url_for('static', filename='images/' + brick.image) }}"
                     alt="{{ brick.name }}"
                     style="width: 100%; height: 200px; object-fit: cover; border-radius: 10px;">
                <h3>{{ brick.name }}</h3>
                <p>240x120x65 –º–º</p>
                <div class="brick-price">{{ brick.price }} —Å—É–º</div>
                <div class="brick-actions">
                    <button class="btn add-to-cart" data-id="{{ brick.id }}">–í –∫–æ—Ä–∑–∏–Ω—É</button>
                    <a href="{{ url_for('product', product_id=brick.id) }}" class="btn btn-outline">–ü–æ–¥—Ä–æ–±–Ω–µ–µ</a>
                </div>
            </div>
            {% endfor %}
        </div>
    </main>

    <footer>
        <div class="footer-content">
            <div class="footer-section">
                <h4>LegoBricks</h4>
                <p>–ú–∞–≥–∞–∑–∏–Ω –∫–∞—á–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö LEGO-–∫–∏—Ä–ø–∏—á–µ–π –≤ –¢–∞—à–∫–µ–Ω—Ç–µ</p>
            </div>
            <div class="footer-section">
                <h4>–ù–∞–≤–∏–≥–∞—Ü–∏—è</h4>
                <ul>
                    <li><a href="{{ url_for('index') }}">–ì–ª–∞–≤–Ω–∞—è</a></li>
                    <li><a href="{{ url_for('catalog') }}">–ö–∞—Ç–∞–ª–æ–≥</a></li>
                    <li><a href="{{ url_for('about') }}">–û –Ω–∞—Å</a></li>
                    <li><a href="{{ url_for('cart') }}">–ö–æ—Ä–∑–∏–Ω–∞</a></li>
                </ul>
            </div>
            <div class="footer-section">
                <h4>–ö–æ–Ω—Ç–∞–∫—Ç—ã</h4>
                <p>–≥. –¢–∞—à–∫–µ–Ω—Ç, –ú–∏—Ä–∑–æ-–£–ª—É–≥–±–µ–∫—Å–∫–∏–π —Ä–∞–π–æ–Ω, —É–ª. –ë–ò–ô 434</p>
                <p>–¢–µ–ª: +998910010013</p>
                <p>Email: info@legobricks.uz</p>
            </div>
        </div>
        <div class="footer-bottom">
            <p>&copy; 2026 LegoBricks. –í—Å–µ –ø—Ä–∞–≤–∞ –∑–∞—â–∏—â–µ–Ω—ã.</p>
        </div>
    </footer>

    <script src="{{ url_for('static', filename='js/script.js') }}"></script>
    <script>
        function updateCartCount() {
            fetch('/api/cart/count')
                .then(res => res.json())
                .then(data => {
                    document.getElementById('cart-count').textContent = data.count;
                });
        }
        updateCartCount();
    </script>
</body>
</html>